<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!--
  Python Tutor: https://github.com/pgbovine/OnlinePythonTutor/
  Copyright (C) Philip Guo (philip@pgbovine.net)
  LICENSE: https://github.com/pgbovine/OnlinePythonTutor/blob/master/LICENSE.txt
-->

<head>
  <title>CS 220 - Conditionals 2</title>

  <script type="text/javascript" src="../js/pytutor-embed.bundle.js" charset="utf-8"></script>

</head>

<body style="background-color: white;">

<!--
To auto-generate examples:

python pytutor.py lec-10/review-1.py lec-10/review-2.py lec-10/review-3.py lec-10/refactor1-orig.py lec-10/refactor1-A.py lec-10/refactor1-B.py lec-10/refactor2-orig.py lec-10/refactor2-A.py lec-10/refactor2-B.py lec-10/refactor3-orig.py lec-10/refactor3-A.py lec-10/refactor3-B.py lec-10/refactor4-orig.py lec-10/refactor4-A.py lec-10/refactor4-B.py lec-10/refactor5-orig.py lec-10/refactor5-A.py lec-10/refactor5-B.py
  -->

<h1>CS 220 - Conditionals 2</h1>

<h2>Review 1</h2>

<div id="lec-10_review-1_py"></div>
<script type="text/javascript">
  var trace = {"code": "def subtract(x=100, y=1):\n    return x - y\n\nx = 200\ny = 2\nprint(subtract(y=y))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "<module>", "globals": {"subtract": ["REF", 1]}, "ordered_globals": ["subtract"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "<module>", "globals": {"subtract": ["REF", 1], "x": 200}, "ordered_globals": ["subtract", "x"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": ""}, {"line": 6, "event": "step_line", "func_name": "<module>", "globals": {"subtract": ["REF", 1], "x": 200, "y": 2}, "ordered_globals": ["subtract", "x", "y"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "subtract", "globals": {"subtract": ["REF", 1], "x": 200, "y": 2}, "ordered_globals": ["subtract", "x", "y"], "stack_to_render": [{"func_name": "subtract", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"x": 100, "y": 2}, "ordered_varnames": ["x", "y"], "is_zombie": false, "is_highlighted": true, "unique_hash": "subtract_f1"}], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "subtract", "globals": {"subtract": ["REF", 1], "x": 200, "y": 2}, "ordered_globals": ["subtract", "x", "y"], "stack_to_render": [{"func_name": "subtract", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"x": 100, "y": 2}, "ordered_varnames": ["x", "y"], "is_zombie": false, "is_highlighted": true, "unique_hash": "subtract_f1"}], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": ""}, {"line": 2, "event": "return", "func_name": "subtract", "globals": {"subtract": ["REF", 1], "x": 200, "y": 2}, "ordered_globals": ["subtract", "x", "y"], "stack_to_render": [{"func_name": "subtract", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"x": 100, "y": 2, "__return__": 98}, "ordered_varnames": ["x", "y", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "subtract_f1"}], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": ""}, {"line": 6, "event": "return", "func_name": "<module>", "globals": {"subtract": ["REF", 1], "x": 200, "y": 2}, "ordered_globals": ["subtract", "x", "y"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "subtract(x, y)", null, [["x", 100], ["y", 1]]]}, "stdout": "98\n"}]};
  addVisualizerToPage(trace, 'lec-10_review-1_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h2>Review 2</h2>
          
<div id="lec-10_review-2_py"></div>
<script type="text/javascript">
  var trace = {"code": "def divide(top, bottom):\n    return top/bottom\n\ndef flip_div(top=1, bottom=2, flip=False):\n    if flip:\n        return divide(top=bottom, bottom=top)\n    else:\n        return divide(top=top, bottom=bottom)\n\nx = 2\ny = 3\nprint(flip_div(x, y, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "<module>", "globals": {"divide": ["REF", 1]}, "ordered_globals": ["divide"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null]}, "stdout": ""}, {"line": 10, "event": "step_line", "func_name": "<module>", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2]}, "ordered_globals": ["divide", "flip_div"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 11, "event": "step_line", "func_name": "<module>", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2}, "ordered_globals": ["divide", "flip_div", "x"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 12, "event": "step_line", "func_name": "<module>", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 4, "event": "call", "func_name": "flip_div", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true}, "ordered_varnames": ["top", "bottom", "flip"], "is_zombie": false, "is_highlighted": true, "unique_hash": "flip_div_f1"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "flip_div", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true}, "ordered_varnames": ["top", "bottom", "flip"], "is_zombie": false, "is_highlighted": true, "unique_hash": "flip_div_f1"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 6, "event": "step_line", "func_name": "flip_div", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true}, "ordered_varnames": ["top", "bottom", "flip"], "is_zombie": false, "is_highlighted": true, "unique_hash": "flip_div_f1"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "divide", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true}, "ordered_varnames": ["top", "bottom", "flip"], "is_zombie": false, "is_highlighted": false, "unique_hash": "flip_div_f1"}, {"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"top": 3, "bottom": 2}, "ordered_varnames": ["top", "bottom"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "divide", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true}, "ordered_varnames": ["top", "bottom", "flip"], "is_zombie": false, "is_highlighted": false, "unique_hash": "flip_div_f1"}, {"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"top": 3, "bottom": 2}, "ordered_varnames": ["top", "bottom"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 2, "event": "return", "func_name": "divide", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true}, "ordered_varnames": ["top", "bottom", "flip"], "is_zombie": false, "is_highlighted": false, "unique_hash": "flip_div_f1"}, {"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"top": 3, "bottom": 2, "__return__": 1.5}, "ordered_varnames": ["top", "bottom", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 6, "event": "return", "func_name": "flip_div", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [{"func_name": "flip_div", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"top": 2, "bottom": 3, "flip": true, "__return__": 1.5}, "ordered_varnames": ["top", "bottom", "flip", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "flip_div_f1"}], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": ""}, {"line": 12, "event": "return", "func_name": "<module>", "globals": {"divide": ["REF", 1], "flip_div": ["REF", 2], "x": 2, "y": 3}, "ordered_globals": ["divide", "flip_div", "x", "y"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(top, bottom)", null], "2": ["FUNCTION", "flip_div(top, bottom, flip)", null, [["top", 1], ["bottom", 2], ["flip", false]]]}, "stdout": "1.5\n"}]};
  addVisualizerToPage(trace, 'lec-10_review-2_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h2>Review 3</h2>            

<div id="lec-10_review-3_py"></div>
<script type="text/javascript">
  var trace = {"code": "last_b = None\n\ndef divide(t, b=None):\n    global last_b\n    if b == None:\n        b = last_b\n    last_b = b\n    return t / b\n\nprint(divide(1, 4))\nprint(divide(2))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "<module>", "globals": {"last_b": null}, "ordered_globals": ["last_b"], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 10, "event": "step_line", "func_name": "<module>", "globals": {"last_b": null, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": ""}, {"line": 3, "event": "call", "func_name": "divide", "globals": {"last_b": null, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"t": 1, "b": 4}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f1"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "divide", "globals": {"last_b": null, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"t": 1, "b": 4}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f1"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": ""}, {"line": 7, "event": "step_line", "func_name": "divide", "globals": {"last_b": null, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"t": 1, "b": 4}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f1"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": ""}, {"line": 8, "event": "step_line", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"t": 1, "b": 4}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f1"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": ""}, {"line": 8, "event": "return", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"t": 1, "b": 4, "__return__": 0.25}, "ordered_varnames": ["t", "b", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f1"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": ""}, {"line": 11, "event": "step_line", "func_name": "<module>", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 3, "event": "call", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"t": 2, "b": null}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 5, "event": "step_line", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"t": 2, "b": null}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 6, "event": "step_line", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"t": 2, "b": null}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 7, "event": "step_line", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"t": 2, "b": 4}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 8, "event": "step_line", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"t": 2, "b": 4}, "ordered_varnames": ["t", "b"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 8, "event": "return", "func_name": "divide", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [{"func_name": "divide", "is_parent": false, "frame_id": 2, "parent_frame_id_list": [], "encoded_locals": {"t": 2, "b": 4, "__return__": 0.5}, "ordered_varnames": ["t", "b", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "divide_f2"}], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n"}, {"line": 11, "event": "return", "func_name": "<module>", "globals": {"last_b": 4, "divide": ["REF", 1]}, "ordered_globals": ["last_b", "divide"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "divide(t, b)", null, [["b", null]]]}, "stdout": "0.25\n0.5\n"}]};
  addVisualizerToPage(trace, 'lec-10_review-3_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h2>Refactor Exercise 1</h2>

In each case, the programmer attempted to refactor the code twice.
One of the refactors is wrong (i.e., the code doesn't behave the same
way anymore).  Try to identify which refactor is correct and which is
wrong.  Then step through all three to verify whether A or B was the
same as the original.

<h3>Original Version</h3>

<div id="lec-10_refactor1-orig_py"></div>
<script type="text/javascript">
  var trace = {"code": "def or2(cond1, cond2):\n    return cond1 or cond2\n\nprint(or2(False, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "<module>", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "return", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true, "__return__": true}, "ordered_varnames": ["cond1", "cond2", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 4, "event": "return", "func_name": "<module>", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor1-orig_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h3>Refactor A</h3>
      
<div id="lec-10_refactor1-A_py"></div>
<script type="text/javascript">
  var trace = {"code": "def or2(cond1, cond2):\n    rv = False\n    rv = rv or cond1\n    rv = rv or cond2\n    return rv\n\nprint(or2(False, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 7, "event": "step_line", "func_name": "<module>", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true, "rv": false}, "ordered_varnames": ["cond1", "cond2", "rv"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true, "rv": false}, "ordered_varnames": ["cond1", "cond2", "rv"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true, "rv": true}, "ordered_varnames": ["cond1", "cond2", "rv"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 5, "event": "return", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true, "rv": true, "__return__": true}, "ordered_varnames": ["cond1", "cond2", "rv", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 7, "event": "return", "func_name": "<module>", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor1-A_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

      
<h3>Refactor B</h3>

<div id="lec-10_refactor1-B_py"></div>
<script type="text/javascript">
  var trace = {"code": "def or2(cond1, cond2):\n    if cond1:\n        return cond2\n    else:\n        return False\n\nprint(or2(False, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 7, "event": "step_line", "func_name": "<module>", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 5, "event": "return", "func_name": "or2", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [{"func_name": "or2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": false, "cond2": true, "__return__": false}, "ordered_varnames": ["cond1", "cond2", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "or2_f1"}], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": ""}, {"line": 7, "event": "return", "func_name": "<module>", "globals": {"or2": ["REF", 1]}, "ordered_globals": ["or2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "or2(cond1, cond2)", null]}, "stdout": "False\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor1-B_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h2>Refactor Exercise 2</h2>

In each case, the programmer attempted to refactor the code twice.
One of the refactors is wrong (i.e., the code doesn't behave the same
way anymore).  Try to identify which refactor is correct and which is
wrong.  Then step through all three to verify whether A or B was the
same as the original.

<h3>Original Version</h3>      

<div id="lec-10_refactor2-orig_py"></div>
<script type="text/javascript">
  var trace = {"code": "def and2(cond1, cond2):\n    return cond1 and cond2\n\nprint(and2(True, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "<module>", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "return", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true, "__return__": true}, "ordered_varnames": ["cond1", "cond2", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 4, "event": "return", "func_name": "<module>", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor2-orig_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h3>Refactor A</h3>

<div id="lec-10_refactor2-A_py"></div>
<script type="text/javascript">
  var trace = {"code": "def and2(cond1, cond2):\n    rv = False\n    rv = rv and cond1\n    rv = rv and cond2\n    return rv\n\nprint(and2(True, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 7, "event": "step_line", "func_name": "<module>", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true, "rv": false}, "ordered_varnames": ["cond1", "cond2", "rv"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true, "rv": false}, "ordered_varnames": ["cond1", "cond2", "rv"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true, "rv": false}, "ordered_varnames": ["cond1", "cond2", "rv"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 5, "event": "return", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true, "rv": false, "__return__": false}, "ordered_varnames": ["cond1", "cond2", "rv", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 7, "event": "return", "func_name": "<module>", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": "False\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor2-A_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

      
<h3>Refactor B</h3>      

<div id="lec-10_refactor2-B_py"></div>
<script type="text/javascript">
  var trace = {"code": "def and2(cond1, cond2):\n    if cond1:\n        return cond2\n    else:\n        return False\n\nprint(and2(True, True))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 7, "event": "step_line", "func_name": "<module>", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true}, "ordered_varnames": ["cond1", "cond2"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 3, "event": "return", "func_name": "and2", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [{"func_name": "and2", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"cond1": true, "cond2": true, "__return__": true}, "ordered_varnames": ["cond1", "cond2", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "and2_f1"}], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": ""}, {"line": 7, "event": "return", "func_name": "<module>", "globals": {"and2": ["REF", 1]}, "ordered_globals": ["and2"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "and2(cond1, cond2)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor2-B_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h2>Refactor Exercise 3</h2>

In each case, the programmer attempted to refactor the code twice.
One of the refactors is wrong (i.e., the code doesn't behave the same
way anymore).  Try to identify which refactor is correct and which is
wrong.  Then step through all three to verify whether A or B was the
same as the original.

<h3>Original Version</h3>
      

<div id="lec-10_refactor3-orig_py"></div>
<script type="text/javascript">
  var trace = {"code": "def fix(moves, should):\n    if moves:\n        if should:\n            return \"good\"\n        else:\n            return \"duct tape\"\n    else:\n        if should:\n            return \"WD-40\"\n        else:\n            return \"good\"\n\nprint(fix(False, False))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 13, "event": "step_line", "func_name": "<module>", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 8, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 11, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 11, "event": "return", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false, "__return__": "good"}, "ordered_varnames": ["moves", "should", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 13, "event": "return", "func_name": "<module>", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": "good\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor3-orig_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>

<h3>Refactor A</h3>

<div id="lec-10_refactor3-A_py"></div>
<script type="text/javascript">
  var trace = {"code": "def fix(moves, should):\n    if moves and not should:\n        return \"duct tape\"\n    elif not moves and should:\n        return \"WD-40\"\n    elif moves and should:\n        return \"good\"\n    elif not moves and not should:\n        return \"good\"\n\nprint(fix(False, False))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 11, "event": "step_line", "func_name": "<module>", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 6, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 8, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 9, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 9, "event": "return", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false, "__return__": "good"}, "ordered_varnames": ["moves", "should", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 11, "event": "return", "func_name": "<module>", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": "good\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor3-A_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>
      
<h3>Refactor B</h3>
      
<div id="lec-10_refactor3-B_py"></div>
<script type="text/javascript">
  var trace = {"code": "def fix(moves, should):\n    if should:\n        if moves:\n            return \"duct tape\"\n        else:\n            return \"good\"\n    else:\n        if moves:\n            return \"good\"\n        else:\n            return \"duct tape\"\n\nprint(fix(False, False))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 13, "event": "step_line", "func_name": "<module>", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 8, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 11, "event": "step_line", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false}, "ordered_varnames": ["moves", "should"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 11, "event": "return", "func_name": "fix", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [{"func_name": "fix", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"moves": false, "should": false, "__return__": "duct tape"}, "ordered_varnames": ["moves", "should", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "fix_f1"}], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": ""}, {"line": 13, "event": "return", "func_name": "<module>", "globals": {"fix": ["REF", 1]}, "ordered_globals": ["fix"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "fix(moves, should)", null]}, "stdout": "duct tape\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor3-B_py',  {startingInstruction: 0, hideCode: false, lang: "py3"});
</script>


<h2>Refactor Exercise 4</h2>

In each case, the programmer attempted to refactor the code twice.
One of the refactors is wrong (i.e., the code doesn't behave the same
way anymore).  Try to identify which refactor is correct and which is
wrong.  Then step through all three to verify whether A or B was the
same as the original.

<h3>Original Version</h3>
      
<div id="lec-10_refactor4-orig_py"></div>
<script type="text/javascript">
  var trace = {"code": "def is_220(a, b, c):\n    return a==2 and b==2 and c==0\n\nprint(is_220(2, 2, 0))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "return", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0, "__return__": true}, "ordered_varnames": ["a", "b", "c", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 4, "event": "return", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor4-orig_py',  {startingInstruction: 0, hideCode: false, lang: "py3", disableHeapNesting: true});
</script>


<h3>Refactor A</h3>

     <div id="lec-10_refactor4-A_py"></div>
<script type="text/javascript">
  var trace = {"code": "def is_220(a, b, c):\n    if a==2:\n        if c==0:\n            if b==2:\n                return True\n    return False\n\nprint(is_220(2, 2, 0))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 8, "event": "step_line", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 5, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 5, "event": "return", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0, "__return__": true}, "ordered_varnames": ["a", "b", "c", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 8, "event": "return", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor4-A_py',  {startingInstruction: 0, hideCode: false, lang: "py3", disableHeapNesting: true});
</script>
 
<h3>Refactor B</h3>

<div id="lec-10_refactor4-B_py"></div>
<script type="text/javascript">
  var trace = {"code": "def is_220(a, b, c):\n    if a==2 or b==2 or c==0:\n        return False\n    return True\n\nprint(is_220(2, 2, 0))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 6, "event": "step_line", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 3, "event": "return", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 0, "__return__": false}, "ordered_varnames": ["a", "b", "c", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 6, "event": "return", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": "False\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor4-B_py',  {startingInstruction: 0, hideCode: false, lang: "py3", disableHeapNesting: true});
</script>


<h2>Refactor Exercise 5</h2>

In each case, the programmer attempted to refactor the code twice.
One of the refactors is wrong (i.e., the code doesn't behave the same
way anymore).  Try to identify which refactor is correct and which is
wrong.  Then step through all three to verify whether A or B was the
same as the original.

<h3>Original Version</h3>


<div id="lec-10_refactor5-orig_py"></div>
<script type="text/javascript">
  var trace = {"code": "def is_220(a, b, c):\n    return a==2 and b==2 and c==0\n\nprint(is_220(2, 2, 9))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "return", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9, "__return__": false}, "ordered_varnames": ["a", "b", "c", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 4, "event": "return", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": "False\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor5-orig_py',  {startingInstruction: 0, hideCode: false, lang: "py3", disableHeapNesting: true});
</script>


<h3>Refactor A</h3>
<div id="lec-10_refactor5-A_py"></div>
<script type="text/javascript">
  var trace = {"code": "def is_220(a, b, c):\n    if a==2:\n        return True\n    if b==2:\n        return True\n    if c==0:\n        return True\n    return False\n\nprint(is_220(2, 2, 9))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 10, "event": "step_line", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 3, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 3, "event": "return", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9, "__return__": true}, "ordered_varnames": ["a", "b", "c", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 10, "event": "return", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": "True\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor5-A_py',  {startingInstruction: 0, hideCode: false, lang: "py3", disableHeapNesting: true});
</script>      
      
<h3>Refactor B</h3>

<div id="lec-10_refactor5-B_py"></div>
<script type="text/javascript">
  var trace = {"code": "def is_220(a, b, c):\n    if a!=2:\n        return False\n    if b!=2:\n        return False\n    if c!=0:\n        return False\n    return True\n\nprint(is_220(2, 2, 9))\n", "trace": [{"line": 1, "event": "step_line", "func_name": "<module>", "globals": {}, "ordered_globals": [], "stack_to_render": [], "heap": {}, "stdout": ""}, {"line": 10, "event": "step_line", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 1, "event": "call", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 2, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 4, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 6, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 7, "event": "step_line", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9}, "ordered_varnames": ["a", "b", "c"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 7, "event": "return", "func_name": "is_220", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [{"func_name": "is_220", "is_parent": false, "frame_id": 1, "parent_frame_id_list": [], "encoded_locals": {"a": 2, "b": 2, "c": 9, "__return__": false}, "ordered_varnames": ["a", "b", "c", "__return__"], "is_zombie": false, "is_highlighted": true, "unique_hash": "is_220_f1"}], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": ""}, {"line": 10, "event": "return", "func_name": "<module>", "globals": {"is_220": ["REF", 1]}, "ordered_globals": ["is_220"], "stack_to_render": [], "heap": {"1": ["FUNCTION", "is_220(a, b, c)", null]}, "stdout": "False\n"}]};
  addVisualizerToPage(trace, 'lec-10_refactor5-B_py',  {startingInstruction: 0, hideCode: false, lang: "py3", disableHeapNesting: true});
</script>




</body>
</html>
